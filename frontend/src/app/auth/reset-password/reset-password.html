<div class="reset-password-container">
  <h2>Reset Password</h2>
  <div *ngIf="!resetComplete && !error">
    <form (ngSubmit)="onSubmit()" #resetPasswordForm="ngForm">
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input
          type="password"
          id="newPassword"
          name="newPassword"
          [(ngModel)]="newPassword"
          required
          minlength="8"
          #passwordInput="ngModel"
        />
        <div
          *ngIf="
            passwordInput.invalid &&
            (passwordInput.dirty || passwordInput.touched)
          "
          class="error-message"
        >
          Password must be at least 8 characters long.
        </div>
      </div>
      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input
          type="password"
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          required
        />
        <div *ngIf="passwordMismatch" class="error-message">
          Passwords do not match.
        </div>
      </div>
      <button
        type="submit"
        [disabled]="
          isSubmitting || resetPasswordForm.invalid || passwordMismatch
        "
      >
        Reset Password
      </button>
    </form>
  </div>
  <div *ngIf="resetComplete" class="success-message">
    <p>{{ message }}</p>
    <a routerLink="/login">Back to Login</a>
  </div>
  <div *ngIf="error" class="error-container">
    <p>{{ errorMessage }}</p>
    <a routerLink="/forgot-password">Request a new reset link</a>
  </div>
</div>
